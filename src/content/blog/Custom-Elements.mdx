---
title: 'Custom Elements'
description: 'è¿‘æ—¥è¢«é—®åˆ°ä¸€ä¸ªé—®é¢˜ï¼šåœ¨ JavaScript ä¸­å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯æ•°ç»„ï¼Ÿã€‚åœ¨å¬åˆ°è¿™ä¸ªé—®é¢˜çš„æ—¶å€™æˆ‘å°±åœ¨æƒ³æœ‰é‚£äº›æ–¹å¼ï¼Œåœ¨æˆ‘ä»¬å¸¸ç”¨çš„ç±»å‹åˆ¤æ–­ä¸­å¯ä»¥é€šè¿‡ `typeof` æˆ– `instanceof` æ¥è¿›è¡Œç±»å‹åˆ¤æ–­ã€‚'
pubDate: '2022-08-29'
tags:
  - Web Components
  - JavaScript
emoji: ğŸ’„
---

åœ¨ Custom Elements ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ˜¯å¦ç»§æ‰¿åŸºæœ¬ HTML å…ƒç´ ï¼Œå¯ä»¥å°†è‡ªå®šä¹‰å…ƒç´ åˆ†ä¸ºä¸¤ç±»ï¼š

- _Autonomous custom elements_ è‡ªä¸»å®šåˆ¶å…ƒç´ 
- _Customized built-in elements_ è‡ªå®šä¹‰å†…ç½®å…ƒç´ 

## è‡ªä¸»å®šåˆ¶å…ƒç´ 

è‡ªä¸»å®šåˆ¶å…ƒç´ ï¼Œæ˜¯ç‹¬ç«‹çš„å…ƒç´ ï¼Œå®ƒä¸ç»§æ‰¿å…¶ä»–å†…å»ºçš„ HTML å…ƒç´ ã€‚

ä½ å¯ä»¥ç›´æ¥æŠŠå®ƒä»¬å†™æˆ HTML æ ‡ç­¾çš„å½¢å¼ï¼Œæ¥åœ¨é¡µé¢ä¸Šä½¿ç”¨ã€‚ä¾‹å¦‚ `<my-card>`ï¼Œæˆ–è€…æ˜¯ `document.createElement("my-card")` è¿™æ ·ã€‚

åƒæˆ‘ä»¬åœ¨[å…¥é—¨](https://www.notion.so/Web-Components-feb3e140c8964426a19540c3a0dc7167)ä¸­å®ç°çš„å°±æ˜¯è‡ªä¸»å®šåˆ¶å…ƒç´ ï¼š

```javascript
class HelloWorld extends HTMLElement {
  constructor() {
    super()
    this.attachShadow({ mode: 'open' })
    this.shadowRoot.innerHTML ==
      `
      <style>
        :host {
          display: block;
          padding: 10px;
          background-color: #eee;
        }
      </style>
      <h1>Hello World!</h1>
    `
  }
}

// æŒ‚è½½
window.customElements.define('hello-world', HelloWorld)
```

> ğŸ’¡ ç»§æ‰¿è‡ª HTMLElement çš„æ ·å¼ display ç½®ä¸º inlineï¼Œå¦‚æœä¸é‡æ–°è®¾ç½® display çš„å€¼ï¼Œé‚£ä¹ˆæ ·å¼æ•ˆæœä¼šæ˜¾ç¤ºä¸å‡ºæ¥ã€‚

## è‡ªå®šä¹‰å†…ç½®å…ƒç´ 

ç»§æ‰¿è‡ªåŸºæœ¬çš„ HTML å…ƒç´ ã€‚åœ¨åˆ›å»ºæ—¶ï¼Œä½ å¿…é¡»æŒ‡å®šæ‰€éœ€æ‰©å±•çš„å…ƒç´ ï¼Œä½¿ç”¨æ—¶ï¼Œéœ€è¦å…ˆå†™å‡ºåŸºæœ¬çš„å…ƒç´ æ ‡ç­¾ï¼Œå¹¶é€šè¿‡ `is` å±æ€§æŒ‡å®š custom element çš„åç§°ã€‚ä¾‹å¦‚ `<p is="my-card">` , æˆ–è€… `document.createElement("p", { is: "my-card" })`ã€‚

```js
// index.js

class MyCard extends HTMLDivElement {
    constructor() {
        super();
        let shadow = this.attachShadow({ mode: "open" });

        let containerEle = document.createElement("div");
        containerEle.style.display = "flex";
        containerEle.style.flexDirection = "column"
        containerEle.style.margin = "100px";
        containerEle.style.border = "1px solid #aaa";

        const headerEle = document.createElement("div");
        headerEle.innerText = "åç‰‡";
        headerEle.style.height = "20px";
        headerEle.style.padding = "10px";
        headerEle.style.borderBottom = "1px solid blue";

        const bodyEle = document.createElement("div");
        bodyEle.innerText = "å§“åï¼šç¼–ç¨‹ä¸‰æ˜§";
        bodyEle.style.padding = "10px";

        containerEle.appendChild(headerEle);
        containerEle.appendChild(bodyEle);
        shadow.appendChild(containerEle);
    }
}

customElements.define("my-card", MyCard, {extends: "div"});
```

## æ€»ç»“

- **è‡ªä¸»å®šåˆ¶å…ƒç´ **çš„æ„é€ å‡½æ•°åªèƒ½ç»§æ‰¿ HTMLElementï¼Œä¸”è°ƒç”¨ `customElements.define()` æ–¹æ³•æ—¶ä¸éœ€è¦ç¬¬ä¸‰ä¸ªå‚æ•°ï¼›
- HTML ä¸­ç›´æ¥ä½¿ç”¨**è‡ªä¸»å®šåˆ¶å…ƒç´ **å®šä¹‰çš„æ ‡ç­¾åç§°å³å¯ï¼›
- **è‡ªä¸»å®šåˆ¶å…ƒç´ **æ ·å¼çš„ display å€¼é»˜è®¤ä¸º inlineï¼Œå¦‚æœ‰éœ€è¦ï¼Œå¯é‡æ–°è®¾ç½®ï¼›
- **è‡ªå®šä¹‰å†…ç½®å…ƒç´ **çš„æ„é€ å‡½æ•°ä¸€èˆ¬åªèƒ½ç»§æ‰¿å¯ç”¨çš„åŸºæœ¬ HTML æ ‡ç­¾ç±»ï¼Œä¸”è°ƒç”¨ `customElements.define()` æ–¹æ³•æ—¶å¿…é¡»è¦ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸€èˆ¬ä¸ºï¼š `{extends: "æ ‡ç­¾å"}`ï¼›
- HTML ä¸­ç›´æ¥ä½¿ç”¨**è‡ªå®šä¹‰å†…ç½®å…ƒç´ **æ—¶ï¼Œéœ€è¦é€šè¿‡ç»„ä»¶æ„é€ å‡½æ•°ç»§æ‰¿ç±»çš„åŸºæœ¬æ ‡ç­¾å + `is="è‡ªå®šä¹‰æ ‡ç­¾å"`ã€‚