---
title: 'åœ¨æµè§ˆå™¨ä¸­é€šè¿‡ import maps ä½¿ç”¨ ES æ¨¡å—'
description: 'åœ¨æµè§ˆå™¨ä¸­é€šè¿‡ import maps ä½¿ç”¨ ES æ¨¡å—'
publishDate: '2022-12-22'
tags:
  - JavaScript
  - HTML
emoji: ğŸ˜Š
darft: true
image: '~/assets/images/sigmund-QuusekRfTI8-unsplash.jpg'
---

## ES æ¨¡å—ç®€ä»‹

[ES Module](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Modules) æ˜¯ JavaScript æ¨¡å—åŒ–çš„å®˜æ–¹æ ‡å‡†ï¼Œ ç›®å‰ä¸»æµçš„æµè§ˆå™¨å·²ç»å®ç°ï¼Œä¸ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹åŠ è½½å™¨ (Loader) å³å¯ä½¿ç”¨ã€‚

[ç‚¹å‡»æŸ¥çœ‹æµè§ˆå™¨æœ€æ–°æ”¯æŒæƒ…å†µ](https://caniuse.com/mdn-javascript_statements_import)

åœ¨æµè§ˆå™¨ä¸­ï¼Œ å¯ä»¥è¿™æ ·ä½¿ç”¨åŸç”Ÿ ES æ¨¡å—åŒ–çš„ JavaScript è„šæœ¬ï¼š

```js
// my_func.js
export function my_func() {
  /* function content goes here */
}
```

```html
<script type="module">
  import { my_func } from './my_func.js'
  my_func()
</script>
```

> æµè§ˆå™¨ä¸­åªæ”¯æŒç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„ä¸‹çš„ ES æ¨¡å— (./, ../, /, http://, https://) ï¼Œ åŒæ—¶ä¹Ÿå—æœåŠ¡å™¨è·¨åŸŸè¯·æ±‚ç­–ç•¥ã€ HTTPS ç­–ç•¥çš„çº¦æŸã€‚

## import maps

åœ¨ Node.js ç¯å¢ƒä¸‹ï¼Œ å¯ä»¥è¿™æ ·å¯¼å…¥å…¨å±€æ¨¡å—ï¼š

```js
import * as _loadash from 'loadash'
```

Node.js ä¼šè‡ªåŠ¨ä» node_modules ç›®å½•ä¸­å»åŠ è½½å¯¹åº”çš„æ¨¡å—ï¼Œ ä½†æ˜¯æµè§ˆå™¨é»˜è®¤ä¸ä¼šè¿™æ ·åšï¼Œå› ä¸ºä¸çŸ¥é“ä»å“ªé‡ŒåŠ è½½å…¨å±€æ¨¡å—ã€‚

import-maps å°±æ˜¯ä¸ºäº†è§£å†³æµè§ˆå™¨ä¸­çš„å…¨å±€æ¨¡å—è€Œå‡ºç°çš„ï¼Œ ç›®å‰æµè§ˆå™¨çš„æ”¯æŒæƒ…å†µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ åŸºäº Chromium å’Œ Firefox çš„æµè§ˆå™¨å·²ç»å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚

![Can I Use](/can-i-use-import-maps.png)

å¯¹äºä¸æ”¯æŒ import-maps çš„æµè§ˆå™¨ï¼Œ å¯ä»¥ä½¿ç”¨ [es-module-shims](https://github.com/guybedford/es-module-shims) è¿›è¡Œå¤„ç†ã€‚

import-maps ä½¿ç”¨ Json çš„å½¢å¼æ¥å®šä¹‰æµè§ˆå™¨ä¸­çš„å…¨å±€æ¨¡å—ï¼š

```html
<script type="importmap">
  {
    "imports": {
      "loadash": "/libs/loadash/index.js",
      "jquery": "/libs/jquery/index.js",
      "three": "/libs/three.js/three.js",
      "three/examples/": "/libs/three.js/examples/"
    }
  }
</script>
```

å…¨å±€ ES æ¨¡å—çš„å®šä¹‰åˆ†ä¸¤ç§å½¢å¼ï¼š

- é€šè¿‡åˆ«åæŒ‡å®šæ¨¡å—çš„åœ°å€ï¼Œ é€‚ç”¨äºåªæœ‰ä¸€ä¸ª js æ–‡ä»¶çš„æ¨¡å—ï¼›
- é€šè¿‡è·¯å¾„æŒ‡å®šæ¨¡å—çš„ç›®å½•ï¼Œé€‚ç”¨äºå¤šä¸ª js æ–‡ä»¶ç»„æˆçš„æ¨¡å—ï¼›

æœ‰äº†ä¸Šé¢çš„ importmap å®šä¹‰ï¼Œ å¯ä»¥åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­è¿™æ ·ä½¿ç”¨å…¨å±€æ¨¡å—ï¼š

```js
import * as _loadash from 'loadash' // è‡ªåŠ¨åŠ è½½ /libs/loadash/index.js
import $ from 'jquery' // è‡ªåŠ¨åŠ è½½ /libs/jquery/index.js
import { Scene, WebGLRenderer } from 'three' // è‡ªåŠ¨åŠ è½½ /libs/three.js/three.js
import { CinematicCamera } from 'three/examples/jsm/cameras/CinematicCamera.js' // è‡ªåŠ¨åŠ è½½ /libs/three.js/examples/jsm/cameras/CinematicCamera.js
```
